/** type {ComponentContext} */
let menuDrawer;
window.drawer_opts = {
  autoHideWidth: 1280,
  on: {
    'drawer:open': function() {
      /* ... */
    },
    'drawer:close': function() {
      /* ... */
    }
  },
  ready: function() {
    menuDrawer = this;
    menuDrawer.$.playAnimation(['animate__fadeIn', enterAnimation]);
  }
};

function scrollbarVisible(element) {
  const r = element.getBoundingClientRect();
  return r.bottom !== r.height;
}

{% if options contains 'ext-links' -%}
function processExternalLinks(view) {
  // Force opening of all non-local links in a new window
  zuix.$(view).find('a[href*="://"]')
          .attr('target', '_blank')
          .attr('rel', 'noreferrer');
}
zuix.hook('view:process', function(view) {
  processExternalLinks(view);
});
processExternalLinks(document);
{% endif %}

// add presentation anim to the drawer
const referrerLink = document.createElement('a');
referrerLink.href = document.referrer;
const enterAnimation =
  (referrerLink.pathname === '{{ app.baseUrl }}') ?
    'animate__fadeInLeft' : 'animate__fadeIn';

// smooth scroll for local anchors
function navigateTo(anchor) {
  const target = zuix.$.find('a[name="' + anchor + '"]');
  zuix.context(document.body).scroll
          .scrollTo(target, 500);
}
